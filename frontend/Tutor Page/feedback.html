<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutor Feedback &amp; Ratings</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * { 
            font-family: 'Inter', sans-serif; 
        }
        
        body {
            box-sizing: border-box;
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 25%, #1d4ed8 50%, #1e3a8a 75%, #312e81 100%);
            min-height: 100%;
            transition: all 0.4s ease;
        }

        body.dark-mode {
            background: #0f172a;
        }

        html, body {
            height: 100%;
        }

        .navbar {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(30, 64, 175, 0.9) 25%, rgba(29, 78, 216, 0.9) 50%, rgba(30, 58, 138, 0.9) 75%, rgba(49, 46, 129, 0.9) 100%);
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 30;
            transition: all 0.4s ease;
        }

        .dark-mode .navbar {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .dark-mode .card {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .card:hover {
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .dark-mode .card:hover {
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            color: white;
            padding: 12px 28px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb, #1e3a8a);
            box-shadow: 0 6px 24px rgba(59, 130, 246, 0.6);
            transform: translateY(-2px);
        }

        .btn-primary:active {
            transform: translateY(0px);
            box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
        }

        .form-input {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 12px 16px;
            width: 100%;
            font-size: 14px;
            transition: all 0.3s ease;
            color: #1e293b;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        .dark-mode .form-input {
            background: #0f172a;
            border-color: #334155;
            color: #f1f5f9;
        }

        .dark-mode .form-input:focus {
            background: #1e293b;
            border-color: #3b82f6;
        }

        .dark-mode-toggle {
            position: relative;
            width: 82px;
            height: 42px;
            padding: 4px;
            border-radius: 9999px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.35s ease;
            overflow: hidden;
            /* glassy track with subtle gradient */
            background: linear-gradient(135deg, rgba(255,255,255,0.26), rgba(255,255,255,0.1));
            border: 1px solid rgba(255,255,255,0.35);
            box-shadow:
                inset 0 2px 10px rgba(0,0,0,0.18),
                0 6px 20px rgba(30,64,175,0.35);
            backdrop-filter: blur(6px);
        }

        /* animated gradient ring */
        .dark-mode-toggle::before {
            content: "";
            position: absolute;
            inset: -2px;
            border-radius: inherit;
            padding: 2px;
            background: linear-gradient(90deg, #60a5fa, #a78bfa, #60a5fa);
            -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.85;
            transition: opacity .35s ease, filter .35s ease;
            pointer-events: none;
            filter: drop-shadow(0 0 10px rgba(99,102,241,0.35));
        }

        .dark-mode-toggle.active {
            background: linear-gradient(135deg, rgba(17,24,39,0.75), rgba(15,23,42,0.9));
            border-color: rgba(59,130,246,0.45);
            box-shadow:
                0 0 24px rgba(59,130,246,0.45),
                inset 0 2px 10px rgba(0,0,0,0.35);
        }

        .dark-mode-toggle.active::before {
            opacity: 1;
            filter: drop-shadow(0 0 14px rgba(59,130,246,0.55));
        }

        .dark-mode-toggle-circle {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fbbf24;
            background: radial-gradient(circle at 30% 30%, #ffffff, #e2e8f0 70%);
            border: 2px solid rgba(255, 255, 255, 0.85);
            box-shadow:
                0 6px 18px rgba(0,0,0,0.25),
                0 2px 6px rgba(0,0,0,0.12);
            transition: transform .45s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                        background .35s ease,
                        color .35s ease,
                        box-shadow .35s ease;
        }

        .dark-mode-toggle-circle i {
            transition: transform .45s ease, opacity .25s ease;
        }

        .dark-mode-toggle:active .dark-mode-toggle-circle {
            transform: scale(0.96);
        }

        .dark-mode-toggle.active .dark-mode-toggle-circle {
            transform: translateX(40px) rotate(-180deg);
            color: #fbbf24;
            background: radial-gradient(circle at 70% 70%, #0f172a, #111827 70%);
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow:
                0 8px 24px rgba(59, 130, 246, 0.45),
                0 2px 6px rgba(0, 0, 0, 0.25);
        }

        .rating-stars {
            color: #fbbf24;
            display: flex;
            gap: 2px;
            align-items: center;
        }

        .feedback-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .feedback-card:hover {
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.25);
            transform: translateY(-4px);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .dark-mode .feedback-card {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(8px);
            border-color: rgba(30, 41, 59, 0.5);
        }

        .dark-mode .feedback-card:hover {
            border-color: rgba(59, 130, 246, 0.5);
        }

        .gradient-text {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dark-mode .gradient-text {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dark-mode .section-title {
            color: #f1f5f9;
        }

        .header-main {
            color: white;
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 16px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .header-main {
            color: #f1f5f9;
        }

        .header-sub {
            color: rgba(255, 255, 255, 0.9);
            font-size: 18px;
            font-weight: 400;
            margin-bottom: 32px;
        }

        .dark-mode .header-sub {
            color: #cbd5e1;
        }

        .student-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
        }

        .dark-mode-text {
            color: #1e293b;
        }

        .dark-mode .dark-mode-text {
            color: #cbd5e1;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body>
  <header class="navbar">
   <div class="flex items-center justify-between px-8 py-5">
    <div class="flex items-center gap-4"><span class="text-3xl">ðŸŽ“</span>
     <div>
      <h1 class="text-xl font-bold gradient-text">Tutor Match</h1>
      <p class="text-xs text-gray-400">Feedback &amp; Ratings</p>
     </div>
    </div>
    <div class="flex items-center gap-8">
     <div class="dark-mode-toggle" onclick="toggleDarkMode(this)">
      <div class="dark-mode-toggle-circle"><i data-lucide="power" class="w-5 h-5"></i>
      </div>
     </div>
    </div>
   </div>
  </header>
  <main class="p-8">
   <div class="mb-8"><button class="btn-primary mb-6" onclick="window.location.href='tutorpage.html'"> <i data-lucide="arrow-left" class="w-4 h-4 inline mr-2"></i> Back to Home </button>
    <h1 class="header-main">Student Feedback &amp; Ratings</h1>
    <p class="header-sub">View all feedback from your students and track your performance.</p>
   </div><!-- Overall Stats -->
   <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <div class="card p-6 text-center">
     <div class="text-5xl font-bold gradient-text mb-2">
      4.8
     </div>
     <div class="rating-stars justify-center mb-2"><i data-lucide="star" class="w-5 h-5 fill-current"></i> <i data-lucide="star" class="w-5 h-5 fill-current"></i> <i data-lucide="star" class="w-5 h-5 fill-current"></i> <i data-lucide="star" class="w-5 h-5 fill-current"></i> <i data-lucide="star" class="w-5 h-5 fill-current"></i>
     </div>
     <p class="text-sm text-gray-600 dark-mode-text">Overall Rating</p>
    </div>
    <div class="card p-6 text-center">
     <div class="text-5xl font-bold gradient-text mb-2">
      98%
     </div>
     <p class="text-sm text-gray-600 dark-mode-text">Positive Feedback</p>
    </div>
   </div><!-- Rating Breakdown -->
   <div class="card p-8 mb-8">
    <h2 class="section-title"><i data-lucide="bar-chart-3" class="w-7 h-7 text-blue-600"></i> Rating Breakdown</h2>
    <div class="space-y-4">
     <div class="flex items-center gap-4">
      <div class="flex items-center gap-2 w-24"><span class="font-semibold text-gray-700 dark-mode-text">5</span> <i data-lucide="star" class="w-4 h-4 text-yellow-500 fill-current"></i>
      </div>
      <div class="flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
       <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-full rounded-full" style="width: 85%"></div>
      </div><span class="font-semibold text-gray-700 dark-mode-text w-16 text-right">108</span>
     </div>
     <div class="flex items-center gap-4">
      <div class="flex items-center gap-2 w-24"><span class="font-semibold text-gray-700 dark-mode-text">4</span> <i data-lucide="star" class="w-4 h-4 text-yellow-500 fill-current"></i>
      </div>
      <div class="flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
       <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-full rounded-full" style="width: 12%"></div>
      </div><span class="font-semibold text-gray-700 dark-mode-text w-16 text-right">15</span>
     </div>
     <div class="flex items-center gap-4">
      <div class="flex items-center gap-2 w-24"><span class="font-semibold text-gray-700 dark-mode-text">3</span> <i data-lucide="star" class="w-4 h-4 text-yellow-500 fill-current"></i>
      </div>
      <div class="flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
       <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-full rounded-full" style="width: 2%"></div>
      </div><span class="font-semibold text-gray-700 dark-mode-text w-16 text-right">3</span>
     </div>
     <div class="flex items-center gap-4">
      <div class="flex items-center gap-2 w-24"><span class="font-semibold text-gray-700 dark-mode-text">2</span> <i data-lucide="star" class="w-4 h-4 text-yellow-500 fill-current"></i>
      </div>
      <div class="flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
       <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-full rounded-full" style="width: 1%"></div>
      </div><span class="font-semibold text-gray-700 dark-mode-text w-16 text-right">1</span>
     </div>
     <div class="flex items-center gap-4">
      <div class="flex items-center gap-2 w-24"><span class="font-semibold text-gray-700 dark-mode-text">1</span> <i data-lucide="star" class="w-4 h-4 text-yellow-500 fill-current"></i>
      </div>
      <div class="flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
       <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-full rounded-full" style="width: 0%"></div>
      </div><span class="font-semibold text-gray-700 dark-mode-text w-16 text-right">0</span>
     </div>
    </div>
   </div><!-- Filter and Search -->
   <div class="card p-6 mb-8">
    <div class="flex flex-col md:flex-row gap-4">
     <div class="flex-1 relative"><i data-lucide="search" class="w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i> <input type="text" id="feedbackSearchBar" placeholder="Search by student name or subject..." class="form-input pl-12" oninput="filterAllFeedback()">
     </div><select id="ratingFilter" class="form-input" onchange="filterAllFeedback()"> <option value="all">All Ratings</option> <option value="5">5 Stars</option> <option value="4">4 Stars</option> <option value="3">3 Stars</option> <option value="2">2 Stars</option> <option value="1">1 Star</option> </select> <select id="subjectFilter" class="form-input" onchange="filterAllFeedback()"> <option value="all">All Subjects</option> <option value="calculus">Calculus</option> <option value="algebra">Algebra</option> <option value="statistics">Statistics</option> <option value="geometry">Geometry</option> </select>
    </div>
   </div><!-- All Feedback -->
   <div class="card p-8">
    <h2 class="section-title"><i data-lucide="message-square" class="w-7 h-7 text-blue-600"></i> All Feedback</h2>
    <div id="allFeedbackContainer" class="space-y-6"><!-- Feedback items will be populated here -->
    </div>
    <div id="loadMoreContainer" class="mt-8 text-center" style="display: none;"><button class="btn-primary" onclick="loadMoreFeedback()"> <i data-lucide="chevron-down" class="w-4 h-4 inline mr-2"></i> Load More Feedback </button>
    </div>
   </div>
  </main>
  <script>
        lucide.createIcons();

        function toggleDarkMode(toggle) {
            document.body.classList.toggle('dark-mode');
            
            document.querySelectorAll('.dark-mode-toggle').forEach(t => {
                t.classList.toggle('active');
                const icon = t.querySelector('i');
                if (t.classList.contains('active')) {
                    icon.setAttribute('data-lucide', 'moon');
                } else {
                    icon.setAttribute('data-lucide', 'sun');
                }
            });
            
            lucide.createIcons();
        }

        // All feedback data
        const allFeedbackData = [
            { name: "Sarah Hassan", initials: "SH", subject: "Calculus", date: "Oct 28, 2024", rating: 5, comment: "Excellent explanation of derivatives! Very patient and clear. Highly recommend!", color: "linear-gradient(135deg, #3b82f6, #1e40af)" },
            { name: "Ahmed Khalil", initials: "AK", subject: "Algebra", date: "Oct 26, 2024", rating: 5, comment: "Made complex equations easy to understand. Best tutor I've had!", color: "linear-gradient(135deg, #8b5cf6, #ec4899)" },
            { name: "Layla Mansour", initials: "LM", subject: "Statistics", date: "Oct 24, 2024", rating: 4, comment: "Great tutor! Helped me ace my statistics exam. Very knowledgeable.", color: "linear-gradient(135deg, #10b981, #059669)" },
            { name: "Omar Ali", initials: "OA", subject: "Geometry", date: "Oct 22, 2024", rating: 5, comment: "Very knowledgeable and supportive. Explains concepts clearly!", color: "linear-gradient(135deg, #f59e0b, #d97706)" },
            { name: "Fatima Nasser", initials: "FN", subject: "Calculus", date: "Oct 20, 2024", rating: 5, comment: "Outstanding tutor! Made calculus so much easier to understand. Highly professional.", color: "linear-gradient(135deg, #ef4444, #dc2626)" },
            { name: "Karim Youssef", initials: "KY", subject: "Algebra", date: "Oct 18, 2024", rating: 4, comment: "Good explanations and patient teaching style. Would recommend!", color: "linear-gradient(135deg, #06b6d4, #0891b2)" },
            { name: "Nour Saleh", initials: "NS", subject: "Statistics", date: "Oct 16, 2024", rating: 5, comment: "Amazing tutor! Helped me understand probability and distributions perfectly.", color: "linear-gradient(135deg, #a855f7, #9333ea)" },
            { name: "Hassan Ibrahim", initials: "HI", subject: "Geometry", date: "Oct 14, 2024", rating: 5, comment: "Clear explanations and great examples. Really helped with my geometry proofs.", color: "linear-gradient(135deg, #14b8a6, #0d9488)" },
            { name: "Rania Khoury", initials: "RK", subject: "Calculus", date: "Oct 12, 2024", rating: 4, comment: "Very helpful with integration techniques. Patient and understanding.", color: "linear-gradient(135deg, #f97316, #ea580c)" },
            { name: "Ziad Farah", initials: "ZF", subject: "Algebra", date: "Oct 10, 2024", rating: 5, comment: "Best math tutor I've ever had! Makes everything so clear and easy.", color: "linear-gradient(135deg, #84cc16, #65a30d)" },
            { name: "Maya Haddad", initials: "MH", subject: "Statistics", date: "Oct 8, 2024", rating: 3, comment: "Good tutor, but sometimes explanations were a bit rushed. Overall helpful though.", color: "linear-gradient(135deg, #ec4899, #db2777)" },
            { name: "Ali Mahmoud", initials: "AM", subject: "Geometry", date: "Oct 6, 2024", rating: 5, comment: "Excellent teaching methods! Really helped me visualize geometric concepts.", color: "linear-gradient(135deg, #6366f1, #4f46e5)" },
            { name: "Lina Saad", initials: "LS", subject: "Calculus", date: "Oct 4, 2024", rating: 5, comment: "Fantastic tutor! Made limits and continuity so much clearer for me.", color: "linear-gradient(135deg, #f43f5e, #e11d48)" },
            { name: "Youssef Amin", initials: "YA", subject: "Algebra", date: "Oct 2, 2024", rating: 4, comment: "Very knowledgeable and helpful. Great at explaining quadratic equations.", color: "linear-gradient(135deg, #22d3ee, #06b6d4)" },
            { name: "Dina Khalil", initials: "DK", subject: "Statistics", date: "Sep 30, 2024", rating: 5, comment: "Amazing! Helped me understand hypothesis testing perfectly. Highly recommend!", color: "linear-gradient(135deg, #a78bfa, #8b5cf6)" },
            { name: "Tarek Nassar", initials: "TN", subject: "Geometry", date: "Sep 28, 2024", rating: 5, comment: "Great tutor with excellent communication skills. Made geometry fun!", color: "linear-gradient(135deg, #34d399, #10b981)" },
            { name: "Hala Rizk", initials: "HR", subject: "Calculus", date: "Sep 26, 2024", rating: 4, comment: "Very patient and thorough. Helped me improve my calculus grades significantly.", color: "linear-gradient(135deg, #fbbf24, #f59e0b)" },
            { name: "Sami Habib", initials: "SH", subject: "Algebra", date: "Sep 24, 2024", rating: 5, comment: "Outstanding! Made polynomial functions so easy to understand.", color: "linear-gradient(135deg, #fb923c, #f97316)" },
            { name: "Jana Mousa", initials: "JM", subject: "Statistics", date: "Sep 22, 2024", rating: 2, comment: "Decent tutor but I felt the pace was too fast for me. Could use more examples.", color: "linear-gradient(135deg, #c084fc, #a855f7)" },
            { name: "Marwan Sleiman", initials: "MS", subject: "Geometry", date: "Sep 20, 2024", rating: 5, comment: "Excellent tutor! Really helped me understand circle theorems and angles.", color: "linear-gradient(135deg, #4ade80, #22c55e)" }
        ];

        let currentFeedbackIndex = 0;
        const feedbackPerPage = 10;

        function populateAllFeedback() {
            const container = document.getElementById('allFeedbackContainer');
            container.innerHTML = '';
            currentFeedbackIndex = 0;
            
            // Load first batch
            loadMoreFeedback();
        }

        function loadMoreFeedback() {
            const container = document.getElementById('allFeedbackContainer');
            const loadMoreBtn = document.getElementById('loadMoreContainer');
            
            // Use filtered data if available, otherwise use all data
            const dataSource = window.currentFilteredData || allFeedbackData;
            
            // Get the next batch of feedback
            const endIndex = Math.min(currentFeedbackIndex + feedbackPerPage, dataSource.length);
            const feedbackBatch = dataSource.slice(currentFeedbackIndex, endIndex);
            
            feedbackBatch.forEach(feedback => {
                const feedbackCard = document.createElement('div');
                feedbackCard.className = 'feedback-card';
                feedbackCard.setAttribute('data-student', feedback.name.toLowerCase());
                feedbackCard.setAttribute('data-subject', feedback.subject.toLowerCase());
                feedbackCard.setAttribute('data-rating', feedback.rating);
                
                const stars = Array(5).fill(0).map((_, i) => 
                    `<i data-lucide="star" class="w-4 h-4 ${i < feedback.rating ? 'fill-current' : ''}"></i>`
                ).join('');
                
                feedbackCard.innerHTML = `
                    <div class="flex items-start gap-4 mb-4">
                        <div class="student-avatar" style="background: ${feedback.color};">
                            ${feedback.initials}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800 dark-mode-text">${feedback.name}</h4>
                            <p class="text-sm text-gray-500">${feedback.subject} â€¢ ${feedback.date}</p>
                        </div>
                        <div class="rating-stars">
                            ${stars}
                        </div>
                    </div>
                    <p class="text-gray-600 dark-mode-text text-sm">"${feedback.comment}"</p>
                `;
                
                container.appendChild(feedbackCard);
            });
            
            currentFeedbackIndex = endIndex;
            
            // Show or hide "Load More" button
            if (currentFeedbackIndex < dataSource.length) {
                loadMoreBtn.style.display = 'block';
            } else {
                loadMoreBtn.style.display = 'none';
            }
            
            lucide.createIcons();
        }

        function filterAllFeedback() {
            const searchTerm = document.getElementById('feedbackSearchBar').value.toLowerCase().trim();
            const ratingFilter = document.getElementById('ratingFilter').value;
            const subjectFilter = document.getElementById('subjectFilter').value;
            
            // Reset and reload feedback with filters
            const container = document.getElementById('allFeedbackContainer');
            container.innerHTML = '';
            currentFeedbackIndex = 0;
            
            // Filter the data first
            const filteredData = allFeedbackData.filter(feedback => {
                const matchesSearch = searchTerm === '' || 
                    feedback.name.toLowerCase().includes(searchTerm) || 
                    feedback.subject.toLowerCase().includes(searchTerm);
                const matchesRating = ratingFilter === 'all' || feedback.rating.toString() === ratingFilter;
                const matchesSubject = subjectFilter === 'all' || feedback.subject.toLowerCase() === subjectFilter;
                
                return matchesSearch && matchesRating && matchesSubject;
            });
            
            // Load first batch of filtered data
            const endIndex = Math.min(feedbackPerPage, filteredData.length);
            const feedbackBatch = filteredData.slice(0, endIndex);
            
            if (feedbackBatch.length === 0) {
                const noResultsMsg = document.createElement('div');
                noResultsMsg.id = 'noFeedbackResultsMsg';
                noResultsMsg.className = 'text-center py-12 text-gray-500';
                noResultsMsg.innerHTML = '<i data-lucide="search-x" class="w-16 h-16 mx-auto mb-4 opacity-50"></i><p class="text-xl font-semibold mb-2">No feedback found</p><p class="text-sm">Try adjusting your filters or search terms</p>';
                container.appendChild(noResultsMsg);
                document.getElementById('loadMoreContainer').style.display = 'none';
                lucide.createIcons();
                return;
            }
            
            feedbackBatch.forEach(feedback => {
                const feedbackCard = document.createElement('div');
                feedbackCard.className = 'feedback-card';
                feedbackCard.setAttribute('data-student', feedback.name.toLowerCase());
                feedbackCard.setAttribute('data-subject', feedback.subject.toLowerCase());
                feedbackCard.setAttribute('data-rating', feedback.rating);
                
                const stars = Array(5).fill(0).map((_, i) => 
                    `<i data-lucide="star" class="w-4 h-4 ${i < feedback.rating ? 'fill-current' : ''}"></i>`
                ).join('');
                
                feedbackCard.innerHTML = `
                    <div class="flex items-start gap-4 mb-4">
                        <div class="student-avatar" style="background: ${feedback.color};">
                            ${feedback.initials}
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800 dark-mode-text">${feedback.name}</h4>
                            <p class="text-sm text-gray-500">${feedback.subject} â€¢ ${feedback.date}</p>
                        </div>
                        <div class="rating-stars">
                            ${stars}
                        </div>
                    </div>
                    <p class="text-gray-600 dark-mode-text text-sm">"${feedback.comment}"</p>
                `;
                
                container.appendChild(feedbackCard);
            });
            
            // Store filtered data for "Load More"
            window.currentFilteredData = filteredData;
            currentFeedbackIndex = endIndex;
            
            // Show or hide "Load More" button
            const loadMoreBtn = document.getElementById('loadMoreContainer');
            if (currentFeedbackIndex < filteredData.length) {
                loadMoreBtn.style.display = 'block';
            } else {
                loadMoreBtn.style.display = 'none';
            }
            
            lucide.createIcons();
        }

        // Initialize feedback on page load
        populateAllFeedback();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b48516c2d3e30a',t:'MTc2MjU5OTEzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
